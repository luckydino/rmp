System.register(["./react-legacy-S3BmMPiz.js","./index-legacy-DlHSyXZn.js"],(function(e,t){"use strict";var r,s;return{setters:[e=>{r=e.b},e=>{s=e.n}],execute:function(){e("u",(function(e){const s=r.useRef(n);t((()=>{s.current=e}),[e]);const o=r.useRef(null);return o.current||(o.current=function(){return s.current.apply(this,arguments)}),o.current}));const t="undefined"!=typeof window?r.useInsertionEffect||r.useLayoutEffect:()=>{};function n(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}e("e",((e,t)=>{const r={},s={};let[n,o]=[0,0],c=0;t.forEach((t=>{if(e.hasNode(t)){const s=t,i=e.getNodeAttributes(s);r[s]=i,n+=i.x,o+=i.y,c++}else if(e.hasEdge(t)){const r=t,[n,o]=e.extremities(r);s[r]={attr:e.getEdgeAttributes(r),source:n,target:o}}}));const i={app:"rmp",version:1,nodesWithAttrs:r,edgesWithAttrs:s,avgX:n/c,avgY:o/c};return JSON.stringify(i)})),e("i",((e,t,r,n,o,c)=>{const{nodesWithAttrs:i,edgesWithAttrs:a,version:d}=JSON.parse(e);if(1!==d)throw Error(`Unrecognized version: ${d}`);const u={};Object.keys(i).filter((e=>t.hasNode(e))).forEach((e=>{const t=s(10);if(e.startsWith("stn_"))u[e]=`stn_${t}`;else{if(!e.startsWith("misc_node_"))throw Error(`Unrecognized node id: ${e}`);u[e]=`misc_node_${t}`}})),Object.keys(a).filter((e=>t.hasEdge(e))).forEach((e=>u[e]=`line_${s(10)}`));const f=Object.entries(u).reduce(((e,[t,r])=>e.replaceAll(t,r)),e),{nodesWithAttrs:h,edgesWithAttrs:g,avgX:E,avgY:l}=JSON.parse(f),y=h,b=g,[O,A]=[o-E,c-l];return Object.entries(y).forEach((([e,r])=>{r.x+=O,r.y+=A,t.addNode(e,r)})),Object.entries(b).forEach((([e,{attr:r,source:s,target:n}])=>t.addDirectedEdgeWithKey(e,s,n,r))),{nodes:new Set(Object.keys(y)),edges:new Set(Object.keys(b))}}))}}}));
